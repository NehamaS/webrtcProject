"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const core_1 = require("@nestjs/core");
const infrastructure_module_1 = require("./infrastructure.module");
const configuration_service_1 = require("./common/config/configuration.service");
const db_service_1 = require("./db/db.service");
const logging_interceptor_1 = require("./interceptors/logging.interceptor");
const http_exception_filter_1 = require("./filters/http-exception.filter");
async function bootstrap() {
    const app = await core_1.NestFactory.create(infrastructure_module_1.InfrastructureModule);
    let httpExceptionFilter = app.get(http_exception_filter_1.HttpExceptionFilter);
    let loggingInterceptor = app.get(logging_interceptor_1.LoggingInterceptor);
    app.useGlobalFilters(httpExceptionFilter);
    app.useGlobalInterceptors(loggingInterceptor);
    await app.listen(3000);
    await app.init();
    try {
        let service = app.get(configuration_service_1.ConfigurationService);
        let type = service.get('db.dbType');
        console.info("db type:", type);
        let dbservice = app.get(db_service_1.DbService);
        console.info("db type:", dbservice.get("test"));
    }
    finally {
    }
}
bootstrap();
//# sourceMappingURL=main.js.map